From be41e8eeb1bab4ce22299ff388cbb825ce09b41e Mon Sep 17 00:00:00 2001
From: Bruce Guenter <bruce@untroubled.org>
Date: Tue, 24 Oct 2017 11:00:45 -0600
Subject: [PATCH] lib/cli++: Fix build breakages from previous patch to cli++

---
 lib/cli++/cli++topod.pl | 2 +-
 lib/cli++/main.cc       | 5 +++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/lib/cli++/cli++topod.pl b/lib/cli++/cli++topod.pl
index 6327c70..5d2ef13 100644
--- a/lib/cli++/cli++topod.pl
+++ b/lib/cli++/cli++topod.pl
@@ -34,7 +34,7 @@ sub cstr2pod {
 sub type2word {
     my($type) = shift;
     return 'INT' if $type eq 'integer';
-    return 'UINT' if $type eq 'uinteger';
+    return 'UINT' if $type eq 'ulong';
     return 'STR' if $type eq 'string' || $type eq 'stringlist';
     return '' if $type eq 'flag' || $type eq 'counter';
     die "Invalid cli option type '$type'";
diff --git a/lib/cli++/main.cc b/lib/cli++/main.cc
index 4b1c462..e2290e7 100644
--- a/lib/cli++/main.cc
+++ b/lib/cli++/main.cc
@@ -17,6 +17,7 @@
 #include <config.h>
 #include "ac/time.h"
 #include "fdbuf/fdbuf.h"
+#include <limits.h>
 #include <stdlib.h>
 #include <string.h>
 #include "cli++.h"
@@ -89,7 +90,7 @@ static int calc_width(const cli_option* o)
     switch (o->type) {
     case cli_option::string:     width += 6; break;
     case cli_option::integer:    width += 4; break;
-    case cli_option::uinteger:   width += 4; break;
+    case cli_option::ulong:      width += 4; break;
     case cli_option::stringlist: width += 5; break;
     case cli_option::flag:       break;
     case cli_option::counter:    break;
@@ -123,7 +124,7 @@ static void show_option(const cli_option* o, int maxwidth)
     switch(o->type) {
     case cli_option::string:     extra = "=VALUE"; break;
     case cli_option::integer:    extra = "=INT"; break;
-    case cli_option::uinteger:   extra = "=UNS"; break;
+    case cli_option::ulong:      extra = "=UNS"; break;
     case cli_option::stringlist: extra = "=ITEM"; break;
     case cli_option::flag:       break;
     case cli_option::counter:    break;
